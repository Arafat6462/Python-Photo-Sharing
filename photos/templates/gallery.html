{% extends 'base.html' %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
  <div class="hero-content">
    <h1 class="hero-title">Where Creativity Blooms</h1>
    <p class="hero-subtitle">Discover stunning photos and share your beautiful moments</p>
    {% if not user.is_authenticated %}
    <div class="hero-actions">
      <a href="{% url 'signup' %}" class="btn-accent btn-lg">Join Free</a>
      <a href="{% url 'login' %}" class="btn-outline">I have an account</a>
    </div>
    {% endif %}
  </div>
</section>

<!-- Section Header -->
<section class="section-header">
  <h2 class="section-title">
    <span class="title-icon">ðŸŒ¸</span>
    Latest Uploads
  </h2>
</section>

<!-- Photo Grid -->
<section class="photo-grid">
  {% for photo in photos %}
  <a href="{% url 'photo_detail' photo.id %}" class="photo-card {% cycle 'tall' '' 'wide' '' '' %}">
    <div class="photo-wrapper">
      {% if photo.file_type == 'video' %}
      <video src="{{ photo.image.url }}" autoplay loop muted playsinline></video>
      {% else %}
      <img src="{{ photo.image.url }}" alt="{{ photo.title }}" loading="lazy">
      {% endif %}
      <div class="photo-overlay">
        <div class="photo-info">
          <h3 class="photo-title">{{ photo.title }}</h3>
          <div class="photo-meta">
            <span class="photo-author">
              <span class="author-avatar">{{ photo.creator.username|first|upper }}</span>
              {{ photo.creator.username }}
            </span>
            {% if photo.average_rating %}
            <span class="photo-rating">
              <i class="fas fa-star"></i> {{ photo.average_rating|floatformat:1 }}
            </span>
            {% endif %}
          </div>
        </div>
        <div class="photo-actions">
          <span class="action-btn"><i class="far fa-heart"></i> {{ photo.rating_count }}</span>
          <span class="action-btn"><i class="far fa-comment"></i> {{ photo.comment_count }}</span>
        </div>
      </div>
    </div>
  </a>
  {% empty %}
  <!-- Empty State -->
  <div class="empty-state">
    <div class="empty-icon">ðŸ“·</div>
    <h3>No photos yet</h3>
    <p>Be the first to share something beautiful!</p>
    {% if user.is_authenticated and user.is_creator %}
    <a href="{% url 'upload_photo' %}" class="btn-accent">Upload Your First Photo</a>
    {% elif not user.is_authenticated %}
    <a href="{% url 'signup' %}" class="btn-accent">Join Bloom</a>
    {% endif %}
  </div>
  {% endfor %}
</section>
{% endblock %}